window.__require=function e(t,i,n){function o(c,r){if(!i[c]){if(!t[c]){var a=c.split("/");if(a=a[a.length-1],!t[a]){var l="function"==typeof __require&&__require;if(!r&&l)return l(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+c+"'")}}var h=i[c]={exports:{}};t[c][0].call(h.exports,function(e){return o(t[c][1][e]||e)},h,h.exports,e,t,i,n)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({AdsManager:[function(e,t,i){"use strict";cc._RF.push(t,"7938d0hZARCmKGMcrMrUfol","AdsManager");cc.Class({onRewardedVideoFinished:function(e){},onInterstitialAdEnd:function(e){},onShowVideoAdBegin:function(){},onShowVideoAdEnd:function(){}});var n=cc.Class({FIRST_INTERSTITIAL_ADS_INTERVAL:6e4,SHOW_INTERSTITAL_ADS_INTERVAL:6e4,ONE_MINUTE_SECOND:6e4,adConfigUrl:"",MAX_LEVEL:-1,rateTime:0,ratedTime:0,rateRemoveAds:!1,rateCloseAdsEnabled:!1,firstShowAds:!0,lastShowInterstitalTime:0,adListener:null,ctor:function(){},init:function(){var e=this;cc.sys.isNative?(jsb_dp.oneSdkBridge.onInterstitialAdFinished=this.onAdFinishedJsb.bind(this),jsb_dp.oneSdkBridge.onVideoAdFinished=this.onVideoAdFinishedJsb.bind(this),jsb_dp.oneSdkBridge.onShowVideoAdBegin=this.onShowVideoAdBeginJsb.bind(this),jsb_dp.oneSdkBridge.onShowVideoAdEnd=this.onShowVideoAdEndJsb.bind(this)):(onewx.ads.createRewardedVideoAd(game.config.wxRewardedVideoId),onewx.ads.createBannerAd(game.config.wxBannerId),onewx.ads.setRewardedVideoListener({onRewardedVideoFinished:function(){e.onRewardedVideoShowSucceed(!0)},onRewardedVideoEnd:function(){e.onShowVideoAdEndJsb()}})),this.lastShowInterstitalTime=Date.now()},loadRemoteData:function(){},onGameOnShow:function(){if(this.rateCloseAdsEnabled&&!game.playerMan.player.rated){var e=Date.now()-this.rateTime;!game.playerMan.player.rated&&this.rateTime>0&&e>=.4*this.ONE_MINUTE_SECOND&&e<=5*this.ONE_MINUTE_SECOND&&(this.rateRemoveAds=!0,game.adsManager.removeBannerAds(),game.playerMan.setRated(),game.popupMan.popupCommonDlg(game.local.getValue("rate_remove_all_ads")),this.rateTime=0,this.ratedTime=Date.now())}},setInterstitialAdsInterval:function(e){e<20&&(e=20),this.SHOW_INTERSTITAL_ADS_INTERVAL=1e3*e},setInterstitialAdsFirstInterval:function(e){e<20&&(e=20),this.FIRST_INTERSTITIAL_ADS_INTERVAL=1e3*e},setAdListener:function(e){this.adListener=e},isRemovedAds:function(){return game.playerMan.player.removedAds||this.rateRemoveAds&&this.rateCloseAdsEnabled&&Date.now()-this.ratedTime<30*this.ONE_MINUTE_SECOND},showBannerAds:function(){this.isRemovedAds()||(cc.sys.isNative?this.isShowBannerAds()||jsb_dp.oneSdkBridge.showBannerAd():this.isShowBannerAds()||onewx.ads.showBannerAd())},removeBannerAds:function(){cc.sys.isNative?jsb_dp.oneSdkBridge.removeBannerAd():onewx.ads.removeBannerAd()},isShowBannerAds:function(){return!!cc.sys.isNative&&jsb_dp.oneSdkBridge.isShowBannerAd()},showInterstitial:function(){this.isRemovedAds()||Date.now()-this.lastShowInterstitalTime<this.getInterstitialAdsInterval()||(this.firstShowAds=!1,this.lastShowInterstitalTime=Date.now(),cc.sys.isNative&&jsb_dp.oneSdkBridge.showInterstitalAd())},getInterstitialAdsInterval:function(){return this.firstShowAds?this.FIRST_INTERSTITIAL_ADS_INTERVAL:this.SHOW_INTERSTITAL_ADS_INTERVAL},showCrossPromotion:function(){cc.sys.isNative&&jsb_dp.oneSdkBridge.showCrossPromoteAd()},isRewardVideoReady:function(){return cc.sys.isNative?jsb_dp.oneSdkBridge.isRewardVideoReady():onewx.ads.isRewardVideoReady()},showRewardVideoAd:function(){this.isRewardVideoReady()&&(this.lastShowInterstitalTime=Date.now(),cc.sys.isNative?jsb_dp.oneSdkBridge.showRewardVideoAd():onewx.ads.showRewardedVideoAd())},onAdFinishedJsb:function(e){cc.log("onAdFinishedJsb:"+e);var t=JSON.parse(e).channelName;cc.log("channel :"+t+" show interstitial ads finished"),this.adListener&&this.adListener.onInterstitialAdEnd&&this.adListener.onInterstitialAdEnd(t)},onVideoAdFinishedJsb:function(e){cc.log("onVideoAdFinishedJsb:"+e);var t=JSON.parse(e).isSkipped;t?cc.log("reward video ads skipped"):cc.log("reward video ads show success"),this.onRewardedVideoShowSucceed(!t)},onRewardedVideoShowSucceed:function(e){this.adListener&&this.adListener.onRewardedVideoFinished&&this.adListener.onRewardedVideoFinished(e)},onShowVideoAdBeginJsb:function(){this.adListener&&this.adListener.onShowVideoAdBegin&&this.adListener.onShowVideoAdBegin()},onShowVideoAdEndJsb:function(){this.adListener&&this.adListener.onShowVideoAdEnd&&this.adListener.onShowVideoAdEnd()}});n.sharedDirector=null,n.firstUseDirector=!0,n.getInstance=function(){return n.firstUseDirector&&(n.firstUseDirector=!1,n.sharedDirector=new n),n.sharedDirector},t.exports=n,cc._RF.pop()},{}],AdsStatus:[function(e,t,i){"use strict";cc._RF.push(t,"d5f93hdT1BGbL4IEXu4SiVy","AdsStatus");t.exports={ADS_STATUS_COMPLETED:0,ADS_STATUS_SKIPPED:1},cc._RF.pop()},{}],AnalyseManager:[function(e,t,i){"use strict";cc._RF.push(t,"e958df3nfpM56oNYYAsZGHg","AnalyseManager");var n=cc.Class({ctor:function(){},initAnalytics:function(){},trackLoginEvent:function(){cc.sys.isNative&&jsb_dp.oneSdkBridge.trackLogin()},trackPurchaseEvent:function(e,t,i,n){cc.sys.isNative&&jsb_dp.oneSdkBridge.trackPurchase(e,t,i,n)},trackStartProgressionEvent:function(e,t){cc.sys.isNative&&jsb_dp.oneSdkBridge.trackStartProgression(e,t)},trackCompletedProgressionEvent:function(e,t){cc.sys.isNative&&jsb_dp.oneSdkBridge.trackCompletedProgression(e,t)},trackFailedProgressionEvent:function(e,t){cc.sys.isNative&&jsb_dp.oneSdkBridge.trackFailProgression(e,t)},trackErrorEvent:function(e){cc.sys.isNative&&jsb_dp.oneSdkBridge.trackError(e)},trackEvent:function(e,t){cc.sys.isNative&&jsb_dp.oneSdkBridge.trackEvent(e,JSON.stringify(t))}});n.sharedDirector=null,n.firstUseDirector=!0,n.getInstance=function(){return n.firstUseDirector&&(n.firstUseDirector=!1,n.sharedDirector=new n),n.sharedDirector},t.exports=n,cc._RF.pop()},{}],AudioHelper:[function(e,t,i){"use strict";cc._RF.push(t,"03b9en9fHFDCZ81AfXbgGJH","AudioHelper");var n={playBtnSound:function(){game.audioPlayer.playEffectByKey("enter")}};t.exports=n,cc._RF.pop()},{}],AudioMan:[function(e,t,i){"use strict";cc._RF.push(t,"8f941347vZOAabSy5ns5R2h","AudioMan"),cc.Class({extends:cc.Component,properties:{winAudio:{default:null,url:cc.AudioClip},loseAudio:{default:null,url:cc.AudioClip},buttonAudio:{default:null,url:cc.AudioClip},bgm:{default:null,url:cc.AudioClip}},playMusic:function(){cc.audioEngine.playMusic(this.bgm,!0)},pauseMusic:function(){cc.audioEngine.pauseMusic()},resumeMusic:function(){cc.audioEngine.resumeMusic()},_playSFX:function(e){cc.audioEngine.playEffect(e,!1)},playWin:function(){this._playSFX(this.winAudio)},playLose:function(){this._playSFX(this.loseAudio)},playButton:function(){this._playSFX(this.buttonAudio)}}),cc._RF.pop()},{}],AudioPlayer:[function(e,t,i){"use strict";cc._RF.push(t,"14d70iBRMlEe5vzr3//erRP","AudioPlayer");var n=cc.Class({isEffectOn:function(){return"true"==game.storage.getItem("effect_on","true")},isMusicOn:function(){return"true"==game.storage.getItem("music_on","true")},setEffectOn:function(e){game.storage.setItem("effect_on",""+e)},setMusicOn:function(e){game.storage.setItem("music_on",""+e)}});n._instance=null,n._firstUseInstance=!0,n.getInstance=function(){return n._firstUseInstance&&(n._firstUseInstance=!1,n._instance=new n),n._instance},t.exports=n,cc._RF.pop()},{}],Ball:[function(e,t,i){"use strict";cc._RF.push(t,"289b9WHVPdJ3LkUkfPPUuC6","Ball");var n=cc.Class({extends:cc.Component,onBeginContact:function(e,t,i){100===i.tag&&game.gameMan.onGameSuccess()},onEndContact:function(e,t,i){},onPreSolve:function(e,t,i){},onPostSolve:function(e,t,i){}});t.exports=n,cc._RF.pop()},{}],ConfigMan:[function(e,t,i){"use strict";cc._RF.push(t,"616262Tn5VATamqHugl0z8p","ConfigMan");var n=e("./LevelConfig"),o=e("./StoreConfig"),s=e("./WheelConfig"),c=e("./ShareConfig"),r=cc.Class({levelList:null,storeList:null,wheelList:null,shareList:null,ctor:function(){this.storeList=[],this.levelList=[],this.wheelList=[],this.shareList=[]},reload:function(){var e,t=game.utils.loadJson("config/store_config.json"),i=t.stores;for(e=0;e<i.length;++e){var r=new o;r.unmarshal(i[e]),this.storeList.push(r)}var a=(t=game.utils.loadJson("config/level_configs.json")).levels;for(e=0;e<a.length;++e){var l=new n;l.unmarshal(a[e]),this.levelList.push(l)}var h=(t=game.utils.loadJson("config/data_config.json")).wheel;for(e=0;e<h.length;++e){var d=new s;d.unmarshal(h[e]),this.wheelList.push(d)}var u=t.share;for(e=0;e<u.length;++e){var p=new c;p.unmarshal(u[e]),this.shareList.push(p)}},getStoreList:function(){return this.storeList},getLevelList:function(){return this.levelList},getLevelCfg:function(e){return this.levelList[e-1]||{levelId:e,maxLineLen:500}},setLevelCfg:function(e){this.levelList[e.levelId-1]=e},getWheelList:function(){return this.wheelList},getShareList:function(){return this.shareList}});r._instance=null,r._firstUseInstance=!0,r.getInstance=function(){return r._firstUseInstance&&(r._firstUseInstance=!1,r._instance=new r),r._instance},t.exports=r,cc._RF.pop()},{"./LevelConfig":"LevelConfig","./ShareConfig":"ShareConfig","./StoreConfig":"StoreConfig","./WheelConfig":"WheelConfig"}],Config:[function(e,t,i){"use strict";cc._RF.push(t,"30ef0fXi85LqJmVMO6Wm/5C","Config");var n={itunesDownloadUrl:"itms-apps://itunes.apple.com/app/id1372837123?action=write-review",googlePlayUrl:"http://bit.ly/2OMjNkw",iosShortUrl:"https://apple.co/2ETolAc",androidShortUrl:"http://bit.ly/2OMjNkw",appName:"Bricks Crush",iosLeaderBoardKey:"com.douapp.manybricks.rank",iosHardLeaderBoardKey:"com.douapp.manybricks.hardrank",googlePlayLeaderBoardKey:"CgkIouCt0-kBEAIQAQ",IS_DEBUG:!1,IS_ENABLE_HOT_UPDATE:!1,getLeaderBoardKey:function(){return cc.sys.os==cc.sys.OS_ANDROID?this.googlePlayLeaderBoardKey:this.iosLeaderBoardKey},getHardBoardKey:function(){return cc.sys.os==cc.sys.OS_ANDROID?this.googlePlayLeaderBoardKey:this.iosHardLeaderBoardKey},getPlatformDownloadUrl:function(){return cc.sys.os==cc.sys.OS_ANDROID?this.googlePlayUrl:this.itunesDownloadUrl},getShortPlatformDownloadUrl:function(){return cc.sys.os==cc.sys.OS_ANDROID?this.androidShortUrl:this.iosShortUrl},getCrossPromUrl:function(){return cc.sys.os==cc.sys.OS_ANDROID?this.androidCrossPromUrl:this.crossPromUrl},horizontalGame:!1,adConfigUrl:"https://onegameinc.github.io/many_bricks/game_google.html",crossPromUrl:"https://onegameinc.github.io/cross_promotion/config/many_bricks/cross_promotion.html",androidCrossPromUrl:"https://onegameinc.github.io/cross_promotion/config/many_bricks_android/cross_promotion.html",connectEmail:"bricks.crush.play@gmail.com"};t.exports=n,cc._RF.pop()},{}],CrossPromManager:[function(e,t,i){"use strict";cc._RF.push(t,"08d9cHQNtFOB6cjWDzaO+SC","CrossPromManager");var n=cc.Class({ctor:function(){},tryToLoadFromRemote:function(){},getRandomConfig:function(e){var t,i=0;for(t=0;t<e.length;++t)i+=e[t].weight;var n=game.utils.randomNextInt(i),o=0;for(t=0;t<e.length;++t)if((o+=e[t].weight)>n)return e[t];return e[0]},popupCrossPromDlg:function(t,i){var n=e("../controller/CrossPromController").createFromCCB("res/cross/cross_prom_view.ccbi");n.controller.initWith(t,i),n.controller.popup()}});n.sharedDirector=null,n.firstUseDirector=!0,n.getInstance=function(){return n.firstUseDirector&&(n.firstUseDirector=!1,n.sharedDirector=new n),n.sharedDirector},t.exports=n,cc._RF.pop()},{"../controller/CrossPromController":void 0}],DebugUI:[function(e,t,i){"use strict";cc._RF.push(t,"33993F4TZFPzJCRD60yJ9u/","DebugUI");var n=cc.Class({extends:cc.Component,properties:{lblLineLen:cc.Label,editLevel:cc.EditBox,editLineLen:cc.EditBox,progress:cc.ProgressBar},onLoad:function(){game.dispatcher.on("update_line_progress",this.onLineLenUpdate,this),this.editLevel.string=game.gameMan.level,this.config=game.configMan.getLevelCfg(game.gameMan.level),this.editLineLen.string=""+this.config.maxLineLen},onDestroy:function(){game.dispatcher.off("update_line_progress",this.onLineLenUpdate,this)},setLineLenPercent:function(e){this.lblLineLen.string=Math.floor(e)},onLineLenUpdate:function(e){this.setLineLenPercent(e.lineLen)},onRefreshClicked:function(){game.dispatcher.emit("refresh_level")},onDrawLine:function(){game.dispatcher.emit("clear_line")},onSave:function(){var e=this.editLineLen.string,t=this.editLevel.string;game.dispatcher.emit("save_level_config",{lineLen:e,levelId:t})},onNextLevel:function(){game.gameMan.level++,cc.director.loadScene("newlevel-"+game.gameMan.level)}});t.exports=n,cc._RF.pop()},{}],DialogManager:[function(e,t,i){"use strict";cc._RF.push(t,"0a48fPixHpOX6bY1Mg06bXe","DialogManager");var n=e("./ModalComponent"),o=cc.Class({properties:{DIALOG_ZORDER_BEGIN:999,DIALOG_ZORDER_STEP:2,_overlay:null,_scaleFactor:1,_dialogStack:[]},ctor:function(){},createOverlay:function(){this._overlay=new cc.Node("OverLay"),this._overlay.addComponent(n),this._overlay.color=cc.Color.BLACK,this._overlay.opacity=190,this._overlay.width=cc.winSize.width,this._overlay.height=cc.winSize.height,this._overlay.zIndex=this.DIALOG_ZORDER_BEGIN,this._overlay.x=.5*cc.winSize.width,this._overlay.y=.5*cc.winSize.height,this.attachScene(this._overlay)},popup:function(e,t){e.x=.5*cc.winSize.width,e.y=.5*cc.winSize.height,e.setScale(this._scaleFactor);var i=this._dialogStack.length;cc.log("dlgLen:"+i),e.zIndex=0==i?this.DIALOG_ZORDER_BEGIN:this._dialogStack[i-1].zIndex+this.DIALOG_ZORDER_STEP,this._dialogStack.push(e),this._overlay||this.createOverlay(),this._overlay.zIndex=e.zIndex-1,t&&t.overlayColor?this._overlay.color=t.overlayColor:this._overlay.color=cc.Color.BLACK,t&&t.overlayOpacity?this._overlay.opacity=t.overlayOpacity:this._overlay.opacity=190,this.attachScene(e)},attachScene:function(e){cc.director.getScene().addChild(e)},close:function(e,t){var i;cc.isUndefined(t)&&(t=!0);var n=this._dialogStack.length;for(i=n-1;i>=0&&e!==this._dialogStack[i];--i);if(i>=0)if(this._dialogStack.splice(i,1),n=this._dialogStack.length,e.destroy(),0===n)this._overlay.destroy(),this._overlay=null;else{var o=n-1;o>=0?this._overlay.zIndex=this._dialogStack[o].zIndex-1:(this._overlay.destroy(),this._overlay=null,this._dialogStack.length=0)}},closeAll:function(){for(var e=this._dialogStack.length;0!=e;){var t=this._dialogStack[e-1];this.close(t,!0),e=this._dialogStack.length}}});o._instance=null,o._firstUseInstance=!0,o.getInstance=function(){return o._firstUseInstance&&(o._firstUseInstance=!1,o._instance=new o),o._instance},t.exports=o,cc._RF.pop()},{"./ModalComponent":"ModalComponent"}],EditorHelper:[function(e,t,i){"use strict";cc._RF.push(t,"072197T56FM/rxWSwJqXfEm","EditorHelper");var n={CommonEvent:null,MapDisplayType:null,EditorHttpConst:null,localServerPath:"http://localhost:8080",postData:function(e,t,i){e=this.localServerPath+e;var n=new XMLHttpRequest;n.onreadystatechange=t(n),n.open("POST",e,!0),"undifined"!=typeof i?(n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(i)):n.send()},saveHintLine:function(e){game.configMan.setLevelCfg(e);var t={levels:game.configMan.getLevelList()};this.postData("/save_supply_area",function(e){return function(){4==e.readyState&&200==e.status&&alert("save hint line success")}},JSON.stringify(t,null,2))}};t.exports=n,cc._RF.pop()},{}],EditorScene:[function(e,t,i){"use strict";cc._RF.push(t,"5efdei86PBIGoNVZIcU4C5N","EditorScene");var n=e("GamePrepare");cc.Class({extends:cc.Component,properties:{},onLoad:function(){n.start(),game.gameMan.setDevType("editor")},start:function(){},onStartClicked:function(){console.log("Start button clicked!"),game.gameMan.setLevel(1),cc.director.loadScene("newlevel-"+game.gameMan.level)},onChapterClicked:function(){},onSkinClicked:function(){},onStoreClicked:function(){},onSettingClicked:function(){},onRankClicked:function(){},onSoundClicked:function(){},onAddCoinsClicked:function(){}}),cc._RF.pop()},{GamePrepare:"GamePrepare"}],EventDispatcher:[function(e,t,i){"use strict";cc._RF.push(t,"05c3873KWJBTq7djVLifTwP","EventDispatcher");var n=function(e,t,i){this.callback=e,this.target=t,this.listener=i},o=function(){var e;return{getInstance:function(){return e||(e=function(){var e={};return{on:function(t,i,o){var s=!0,c=e[t];if(cc.isUndefined(c))c=[],e[t]=c;else for(var r=0;r<c.length;++r){var a=c[r];if(a.callback===i&&a.target===o){s=!1;break}}s&&c.push(new n(i,o,null))},off:function(t,i,n){if(e[t]){var o=e[t];if(!cc.isUndefined(o)&&o.length>0){for(var s=[],c=0;c<o.length;++c){var r=o[c];r.callback===i&&r.target===n||s.push(r)}e[t]=s}}},emit:function(t,i){if(e[t]){var n=e[t];if(!cc.isUndefined(n)&&n.length>0)for(var o=0;o<n.length;++o){var s=n[o];null!=s.callback&&s.callback.call(s.target,i)}}}}}()),e}}}();t.exports=o,cc._RF.pop()},{}],GCManager:[function(e,t,i){"use strict";cc._RF.push(t,"75521gPlllIt5KQcNQYF3y2","GCManager");var n=cc.Class({ctor:function(){},isGameCenterAvailable:function(){return!!cc.sys.isNative&&jsb_dp.oneSdkBridge.isGameCenterAvailable()},reportScore:function(e,t){cc.sys.isNative&&jsb_dp.oneSdkBridge.reportScore(e,t)},showLeaderboard:function(e){cc.sys.isNative&&jsb_dp.oneSdkBridge.showLeaderboard(e)},reportAchievement:function(e,t){cc.sys.isNative&&jsb_dp.oneSdkBridge.reportAchievement(e,t)},showAchievements:function(e){cc.sys.isNative&&jsb_dp.oneSdkBridge.showAchievements(e)},highScoreForLeaderboard:function(e){return cc.sys.isNative?jsb_dp.oneSdkBridge.highScoreForLeaderboard(e):0},progressForAchievement:function(e){return cc.sys.isNative?jsb_dp.oneSdkBridge.progressForAchievement(e):0}});n.sharedDirector=null,n.firstUseDirector=!0,n.getInstance=function(){return n.firstUseDirector&&(n.firstUseDirector=!1,n.sharedDirector=new n),n.sharedDirector},t.exports=n,cc._RF.pop()},{}],GameMan:[function(e,t,i){"use strict";cc._RF.push(t,"66250lko+ZD8ruWzX4V+Cl5","GameMan");var n=cc.Class({properties:{gameStep:0,devType:"normal",level:0,curLineLen:0},setDevType:function(e){this.devType=e},setLevel:function(e){this.level=e,this.config=game.configMan.getLevelCfg(this.level),this.setCurLineLen(0)},initPhysics:function(){var e=cc.director.getPhysicsManager();e.enabled=!0,e.gravity=cc.v2(0,0),e.enabledAccumulator=!0,e.FIXED_TIME_STEP=1/30,e.VELOCITY_ITERATIONS=8,e.POSITION_ITERATIONS=8},startPhysicsGravity:function(){cc.director.getPhysicsManager().gravity=cc.v2(0,-640)},setCurLineLen:function(e){this.curLineLen=e,game.dispatcher.emit("update_line_progress",{lineLen:this.curLineLen})},getCurrentPencilProgress:function(){return Math.max(0,1-this.curLineLen/this.config.maxLineLen/3)},getCurrentStar:function(){return this.curLineLen<=this.config.maxLineLen?3:this.curLineLen<=2*this.config.maxLineLen?2:1},onGameSuccess:function(){cc.director.getPhysicsManager().enabled=!1,game.playerMan.updateLevelStar(this.level,this.getCurrentStar()),game.playerMan.setLevel(this.level+1),"dev"!==this.devType&&cc.director.loadScene("PassScene")},onEnterNextLevel:function(){this.setLevel(this.level+1)}});n.sharedDirector=null,n.firstUseDirector=!0,n.getInstance=function(){return n.firstUseDirector&&(n.firstUseDirector=!1,n.sharedDirector=new n),n.sharedDirector},t.exports=n,cc._RF.pop()},{}],GamePrepare:[function(e,t,i){"use strict";cc._RF.push(t,"97c7d/rdf1DgKlUUkQc2Z2U","GamePrepare");var n=e("Storage"),o=e("Config"),s=e("ConfigMan"),c=e("PlayerMan"),r=e("Utils"),a=e("ResMan"),l=e("./common/dispatcher/EventDispatcher"),h=e("./model/GameMan"),d=e("./common/audio/AudioPlayer"),u=e("./model/PopupMan"),p=e("./common/popup/DialogManager");cc.isUndefined=function(e){return void 0===e};t.exports.start=function(){(function(){var e={};e.prepared||(e.prepared=!0,e.storage=n.getInstance(),e.config=o,e.configMan=s.getInstance(),e.utils=r,e.playerMan=c.getInstance(),e.resMan=a.getInstance(),e.dispatcher=l.getInstance(),e.gameMan=h.getInstance(),e.audioPlayer=d.getInstance(),e.popupMan=u,e.dialogManager=p.getInstance()),window.game=e})(),game.playerMan.initData(),game.resMan.preload(function(){game.configMan.reload()})},cc._RF.pop()},{"./common/audio/AudioPlayer":"AudioPlayer","./common/dispatcher/EventDispatcher":"EventDispatcher","./common/popup/DialogManager":"DialogManager","./model/GameMan":"GameMan","./model/PopupMan":"PopupMan",Config:"Config",ConfigMan:"ConfigMan",PlayerMan:"PlayerMan",ResMan:"ResMan",Storage:void 0,Utils:"Utils"}],GameScene:[function(e,t,i){"use strict";cc._RF.push(t,"26875kqBIdPPr9pm2+7tkD1","GameScene");var n=e("GameStep"),o=(e("LinePhysicsCollider"),e("Ball")),s=e("../editor/EditorHelper"),c=e("LevelConfig"),r=e("GamePrepare"),a=0,l=1;cc.Class({extends:cc.Component,properties:{rootCanvas:cc.Node,gameStep:0,startBall:cc.Node,endBall:cc.Node,level:0,gameMode:a,physicsLines:[]},initData:function(){this.config=game.configMan.getLevelCfg(game.gameMan.level)},onLoad:function(){this.rootCanvas.on(cc.Node.EventType.TOUCH_START,this.onTouchStart.bind(this),this),this.rootCanvas.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove.bind(this),this),this.rootCanvas.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd.bind(this),this),window.game?(this.initData(),"editor"===game.gameMan.devType?(this.gameMode=l,cc.loader.loadRes("prefabs/debug_ui",function(e,t){var i=cc.instantiate(t);this.rootCanvas.addChild(i)}.bind(this)),this.drawHintLine(this.config.hintPoints)):cc.loader.loadRes("prefabs/top_ui",function(e,t){var i=cc.instantiate(t);this.rootCanvas.addChild(i)}.bind(this))):(r.start(),game.gameMan.setDevType("dev")),game.dispatcher.on("refresh_level",this.onRefreshLevel,this),game.dispatcher.on("clear_line",this.onClearLine,this),game.dispatcher.on("save_level_config",this.onSaveLevelConfig,this),game.dispatcher.on("draw_hint_line",this.onDrawHintLine,this),game.gameMan.initPhysics(),this.startBall.addComponent(o),this.startBall.getComponent(cc.PhysicsCircleCollider).density=.4,this.startBall.getComponent(cc.PhysicsCircleCollider).friction=.1,this.endBall.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static},onDestroy:function(){this.rootCanvas.off(cc.Node.EventType.TOUCH_START,this.onTouchStart.bind(this),this),this.rootCanvas.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove.bind(this),this),this.rootCanvas.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd.bind(this),this),game.dispatcher.off("refresh_level",this.onRefreshLevel,this),game.dispatcher.off("clear_line",this.onClearLine,this),game.dispatcher.off("save_level_config",this.onSaveLevelConfig,this),game.dispatcher.off("draw_hint_line",this.onDrawHintLine,this)},onRefreshLevel:function(){cc.director.loadScene("newlevel-"+game.gameMan.level)},clearPhysicsLines:function(){for(var e=0;e<this.physicsLines.length;++e){this.physicsLines[e].destroy()}},onClearLine:function(e){this.clearPhysicsLines(),this.curLineLen=0,game.gameMan.setCurLineLen(this.curLineLen)},onDrawHintLine:function(e){this.drawHintLine(this.config.hintPoints)},onSaveLevelConfig:function(e){var t=new c;t.levelId=e.levelId,t.maxLineLen=parseInt(e.lineLen),t.hintPoints=this.points||this.config.hintPoints,s.saveHintLine(t)},start:function(){this.gameStep=n.START,this.curLineLen=0,game.gameMan.setCurLineLen(this.curLineLen)},checkIsCanDraw:function(e,t){return e.sub(t).mag()>=6},drawHintLine:function(e){if(e&&e.length>=2){this.hintLine&&this.hintLine.destroy();var t=new cc.Node("Graphics");t.group="line";var i=t.addComponent(cc.Graphics);i.strokeColor=cc.color(30,30,30,155),i.lineWidth=4,t.parent=this.rootCanvas,t.x=.5*-this.rootCanvas.width,t.y=.5*-this.rootCanvas.height,game.utils.drawDashPoints(e,i,[6,6],10),i.stroke(),this.hintLine=t}},onTouchStart:function(e){this.hintLine&&this.hintLine.destroy(),this.curPhysicalLine=new cc.Node("Graphics"),this.curPhysicalLine.group="line",this.path=this.curPhysicalLine.addComponent(cc.Graphics),this.path.strokeColor=cc.color(255,0,0,255),this.path.lineWidth=4,this.curPhysicalLine.parent=this.rootCanvas,this.curPhysicalLine.x=.5*-this.rootCanvas.width,this.curPhysicalLine.y=.5*-this.rootCanvas.height;var t=new cc.Node("Graphics");this.dashedPath=t.addComponent(cc.Graphics),this.dashedPath.strokeColor=cc.color(255,0,0,100),this.dashedPath.lineWidth=4,t.parent=this.rootCanvas,t.x=.5*-this.rootCanvas.width,t.y=.5*-this.rootCanvas.height,this.dashPhysicalLine=t;var i=e.getLocation();i=this.node.parent.convertToNodeSpaceAR(i),this.points=[],this.points.push(cc.v2(i.x,i.y)),this.path.moveTo(i.x,i.y)},onTouchMove:function(e){var t=e.getLocation();t=this.node.parent.convertToNodeSpaceAR(t);var i=this.points[this.points.length-1];this.checkIsCanDraw(i,t)&&(cc.director.getPhysicsManager().rayCast(i,t,cc.RayCastType.All).length<=0?(this.points.push(cc.v2(t.x,t.y)),this.path.lineTo(t.x,t.y),this.path.stroke(),this.curLineLen+=i.sub(t).mag(),game.gameMan.setCurLineLen(this.curLineLen)):(this.dashedPath.clear(),this.dashedPath.moveTo(i.x,i.y),this.dashedPath.lineTo(t.x,t.y),this.dashedPath.stroke()))},onTouchEnd:function(e){this.dashedPath.clear(),this.dashPhysicalLine.destroy(),this.gameMode!==l&&(this.createRigidBody(),game.gameMan.startPhysicsGravity()),this.physicsLines.push(this.curPhysicalLine)},update:function(){switch(this.gameStep){case n.START:(this.startBall.x>.5*cc.winSize.width||this.startBall.x<.5*-cc.winSize.width||this.startBall.y>.5*cc.winSize.height||this.startBall.y<.5*-cc.winSize.height)&&(game.dispatcher.emit("refresh_level"),this.gameStep=n.END);break;case n.END:}},onStartClicked:function(){console.log("Start button clicked!")},createRigidBody:function(){this.curPhysicalLine.addComponent(cc.RigidBody);var e=this.curPhysicalLine.addComponent("LinePhysicsCollider");e.points=this.points,e.friction=.3,e.restitution=.1,e.density=5,e.lineWidth=4,e.apply()}}),cc._RF.pop()},{"../editor/EditorHelper":"EditorHelper",Ball:"Ball",GamePrepare:"GamePrepare",GameStep:"GameStep",LevelConfig:"LevelConfig",LinePhysicsCollider:"LinePhysicsCollider"}],GameStep:[function(e,t,i){"use strict";cc._RF.push(t,"0b5bbx9GWpJiKDveFopmS0B","GameStep");t.exports={PRE_START:0,START:1,END:2},cc._RF.pop()},{}],Game:[function(e,t,i){"use strict";cc._RF.push(t,"e7c9bO7F+hPWLqyo1CBgpUv","Game");var n=cc.Class({extends:cc.Component,statics:{instance:null},onLoad:function(){},start:function(){},startPhysicsGravity:function(){},update:function(e){},onGameSuccess:function(){}});t.exports=n,cc._RF.pop()},{}],IAPData:[function(e,t,i){"use strict";cc._RF.push(t,"9c2c1QqxOlOzLDS+zenjfRH","IAPData");t.exports=function(e,t,i){this.productId=e,this.price=t,this.productNum=i},cc._RF.pop()},{}],LevelCell:[function(e,t,i){"use strict";cc._RF.push(t,"939a6+N+1NCx6I27VdE+0VG","LevelCell"),cc.Class({extends:e("viewCell"),properties:{starWhite1:cc.Node,starWhite2:cc.Node,starWhite3:cc.Node,starYellow1:cc.Node,starYellow2:cc.Node,starYellow3:cc.Node,lockSprite:cc.Node,completedSprite:cc.Node,lbLevel:cc.Label,darkSprite:cc.Node,index:0,data:void 0},onLoad:function(){this.starWhites=[this.starWhite1,this.starWhite2,this.starWhite3],this.starYellows=[this.starYellow1,this.starYellow2,this.starYellow3]},init:function(e,t,i,n){if(cc.log("index:"+e),e>=t.array.length)this.node.active=!1;else{this.index=e,this.data=t.array[e];var o=e+1;if(this.lbLevel.string=o,this.lockSprite.active=!1,this.darkSprite.active=!1,this.completedSprite.active=!1,o>game.playerMan.getLevel())this.lockSprite.active=!0,this.darkSprite.active=!0;else if(o===game.playerMan.getLevel());else{this.completedSprite.active=!0;for(var s=game.playerMan.getLevelStar(o),c=0;c<3;++c){var r=s>c;this.starWhites[c].active=!r,this.starYellows[c].active=r}}}},clicked:function(){game.gameMan.setLevel(this.index+1),cc.director.loadScene("newlevel-"+(this.index+1))}}),cc._RF.pop()},{viewCell:"viewCell"}],LevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"77b89JS5D1Pga4oqZEMGZ2p","LevelConfig");var n=function(){this.levelId=0,this.hintPoints=[],this.maxLineLen=0};n.prototype.unmarshal=function(e){this.levelId=e.levelId,this.hintPoints=e.hintPoints,this.maxLineLen=e.maxLineLen},t.exports=n,cc._RF.pop()},{}],LevelScene:[function(e,t,i){"use strict";cc._RF.push(t,"61200XLJN9LZL/jq7KspOaf","LevelScene"),cc.Class({extends:cc.Component,properties:{tableView:cc.Node},onLoad:function(){this.initView()},initView:function(){var e=game.configMan.getLevelList();this.tableView.getComponent(cc.tableView).initTableView(e.length,{array:e,target:this})},start:function(){},onBackClicked:function(){cc.director.loadScene("MenuScene")}}),cc._RF.pop()},{}],LinePhysicsCollider:[function(e,t,i){"use strict";cc._RF.push(t,"d5758YF7qlAU5j59/p8CY10","LinePhysicsCollider");var n=cc.PhysicsManager.PTM_RATIO,o=cc.Class({name:"LinePhysicsCollider",extends:cc.PhysicsCollider,mixins:[cc.Collider.Polygon],properties:{lineWidth:5},editor:{menu:!1,requireComponent:cc.RigidBody},_createShape:function(e){for(var t=[],i=this.points,o=(this.offset,0);o<i.length-1;o++){var s=i[o],c=i[o+1],r=s.sub(c).mag(),a=Math.atan2(c.y-s.y,c.x-s.x)-Math.PI/2,l=s.add(c).mul(.5),h=new b2.PolygonShape;h&&(h.SetAsBox(this.lineWidth/2/n,r/2/n,new b2.Vec2(l.x/n,l.y/n),a),t.push(h))}return t}});t.exports=o,cc._RF.pop()},{}],LoadingScene:[function(e,t,i){"use strict";cc._RF.push(t,"e43484cq35P16D9yOAHZb+h","LoadingScene"),cc.Class({extends:cc.Component,properties:{},start:function(){},onStartClicked:function(){console.log("Start button clicked!"),cc.director.loadScene("GameScene")},onChapterClicked:function(){},onSkinClicked:function(){},onStoreClicked:function(){},onSettingClicked:function(){},onRankClicked:function(){},onSoundClicked:function(){},onAddCoinsClicked:function(){}}),cc._RF.pop()},{}],LocalizationManager:[function(e,t,i){"use strict";cc._RF.push(t,"b77f8UUiP1Ba5g37gEwBmHR","LocalizationManager");var n=cc.Class({_isLoaded:!1,curLanguage:null,ctor:function(){},reload:function(){this._isLoaded||(this.curLanguage=game.utils.loadJson("res/config/strings-zh.json"),this._isLoaded=!0)},getValue:function(e){return this.curLanguage[e]||e},isChinese:function(){return!0}});n.sharedDirector=null,n.firstUseDirector=!0,n.getInstance=function(){return n.firstUseDirector&&(n.firstUseDirector=!1,n.sharedDirector=new n),n.sharedDirector},t.exports=n,cc._RF.pop()},{}],MenuScene:[function(e,t,i){"use strict";cc._RF.push(t,"7ae4egF1jBKrK/HLWz7wJzy","MenuScene");var n=e("GamePrepare");cc.Class({extends:cc.Component,properties:{btnAudio:cc.Sprite,sprAudioOn:cc.SpriteFrame,sprAudioOff:cc.SpriteFrame},onLoad:function(){n.start(),this.refreshAudio()},refreshAudio:function(){game.audioPlayer.isEffectOn()?this.btnAudio.spriteFrame=this.sprAudioOn:this.btnAudio.spriteFrame=this.sprAudioOff},start:function(){},onStartClicked:function(){console.log("Start button clicked!"),game.gameMan.setLevel(game.playerMan.getLevel()),cc.director.loadScene("newlevel-"+game.gameMan.level)},onChapterClicked:function(){cc.director.loadScene("LevelScene")},onSkinClicked:function(){game.popupMan.popupCommonDlg("111",function(){cc.log("on skin clicked")})},onStoreClicked:function(){},onSettingClicked:function(){},onRankClicked:function(){},onSoundClicked:function(){game.audioPlayer.setEffectOn(!game.audioPlayer.isEffectOn()),game.audioPlayer.setMusicOn(!game.audioPlayer.isMusicOn()),this.refreshAudio()},onAddCoinsClicked:function(){}}),cc._RF.pop()},{GamePrepare:"GamePrepare"}],ModalComponent:[function(e,t,i){"use strict";cc._RF.push(t,"d1774LufCFCHKhZPZbK3AYe","ModalComponent");var n=cc.Class({extends:cc.Component,onLoad:function(){},onEnable:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){e.stopPropagation()}),this.node.on(cc.Node.EventType.TOUCH_END,function(e){e.stopPropagation()})},onDisable:function(){this.node.off(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()}),this.node.off(cc.Node.EventType.TOUCH_MOVE,function(e){e.stopPropagation()}),this.node.off(cc.Node.EventType.TOUCH_END,function(e){e.stopPropagation()})}});t.exports=n,cc._RF.pop()},{}],NoticeComponent:[function(e,t,i){"use strict";cc._RF.push(t,"52390U3MZhG8oYvglTcG89l","NoticeComponent"),cc.Class({extends:cc.Component,properties:{ndYes:cc.Node,lbYes:cc.Label,ndNo:cc.Node,lbNo:cc.Label,ndOk:cc.Node,lbOk:cc.Label,lbTitle:cc.Label,lbInfo:cc.Label,okCallback:null,noCallback:null},onLoad:function(){},initWithYes:function(e,t){this.ndOk.active=!0,this.ndYes.active=!1,this.ndNo.active=!1,this.lbInfo.string=e,this.okCallback=t},initWithYesNo:function(e,t,i,n,o){this.ndOk.active=!1,this.ndYes.active=!0,this.ndNo.active=!0,this.lbYes.string=t,this.lbNo.string=i,this.okCallback=n,this.noCallback=o},popup:function(){game.dialogManager.popup(this.node)},okClicked:function(e){this.okCallback&&this.okCallback(),this.close()},cancelClicked:function(e){this.noCallback&&this.noCallback(),this.close()},closedClicked:function(e){this.close()},confirmClicked:function(e){this.okCallback&&this.okCallback(),this.close()},close:function(){game.dialogManager.close(this.node)}}),cc._RF.pop()},{}],NotificationManager:[function(e,t,i){"use strict";cc._RF.push(t,"3f6b7/Ir/JPgaVQiyaE01U6","NotificationManager");var n=cc.Class({ctor:function(){},registerNotification:function(){cc.sys.isNative&&jsb_dp.oneSdkBridge.registerNotification()},scheduleNotification:function(e,t,i,n){cc.sys.isNative&&jsb_dp.oneSdkBridge.scheduleNotification(e,t,i,n)},unscheduleNotification:function(){cc.sys.isNative&&jsb_dp.oneSdkBridge.unscheduleNotification()}});n.sharedDirector=null,n.firstUseDirector=!0,n.getInstance=function(){return n.firstUseDirector&&(n.firstUseDirector=!1,n.sharedDirector=new n),n.sharedDirector},t.exports=n,cc._RF.pop()},{}],PassScene:[function(e,t,i){"use strict";cc._RF.push(t,"59c2dawYxtFm6uwuNwc/NSl","PassScene"),cc.Class({extends:cc.Component,properties:{},start:function(){},onNextClicked:function(){game.gameMan.onEnterNextLevel(),cc.director.loadScene("newlevel-"+game.gameMan.level)}}),cc._RF.pop()},{}],PaymentCode:[function(e,t,i){"use strict";cc._RF.push(t,"35e29m621tLi5DuVctekfRd","PaymentCode");t.exports={PAYMENT_CODE_SUCCESS:0,PAYMENT_CODE_FAIL:1},cc._RF.pop()},{}],PaymentInfo:[function(e,t,i){"use strict";cc._RF.push(t,"490cdmQ0LRAgrseVc5XbCZv","PaymentInfo");var n=function(){this.purchaseId=null,this.productId=null,this.receipt=null,this.signature=null,this.info=""};n.prototype.unmarshal=function(e){this.purchaseId=e.purchaseId||"",this.productId=e.productId||"",this.receipt=e.receipt||"",this.signature=e.signature||"",this.info=e.info||""},t.exports=n,cc._RF.pop()},{}],PlayerInfo:[function(e,t,i){"use strict";cc._RF.push(t,"28e5fVLdExMd56mCDT4lvR0","PlayerInfo");var n=function(){this.playerId="",this.bestScore=0,this.removedAds=!1,this.level=0,this.levelMap=null,this.rated=!1};n.prototype.unmarshall=function(e){this.playerId=e.playerId,this.bestScore=e.bestScore||0,this.removedAds=e.removedAds||!1,this.level=e.level||1,this.levelMap=e.levelMap||{},this.rated=e.rated||!1},n.createDefault=function(){var e=new n;return e.hintsCount=5,e.bestScore=0,e.removedAds=!1,e.level=1,e.levelMap={},e.rated=!1,e},t.exports=n,cc._RF.pop()},{}],PlayerMan:[function(e,t,i){"use strict";cc._RF.push(t,"86277QQNrhE8rytnuoKt+eQ","PlayerMan");var n=e("../entity/PlayerInfo"),o=cc.Class({player:null,bestScoreKey:null,levelBoardKey:null,ctor:function(){},initData:function(){var e,t=game.storage.getItem("player_key",null);null==t||""==t?(e=n.createDefault(),game.storage.setItem("player_key",JSON.stringify(e))):(e=new n).unmarshall(JSON.parse(t)),this.player=e},getBestScore:function(){return this.player.bestScore},getLevel:function(){return cc.isUndefined(this.player.level)?1:this.player.level},setLevel:function(e){e<=this.player.level||(this.player.level=e,this._flushToStorage())},updateLevelStar:function(e,t){(cc.isUndefined(this.player.levelMap[e])||this.player.levelMap[e]<t)&&(this.player.levelMap[e]=t,this._flushToStorage())},getLevelStar:function(e){return this.player.levelMap[e]||0},addLevel:function(){this.player.level++,this._flushToStorage()},removedAds:function(){this.player.removedAds=!0,this._flushToStorage()},setRated:function(){this.player.rated=!0,this._flushToStorage()},_flushToStorage:function(){game.storage.setItem("player_key",JSON.stringify(this.player))}});o._instance=null,o._firstUseInstance=!0,o.getInstance=function(){return o._firstUseInstance&&(o._firstUseInstance=!1,o._instance=new o),o._instance},t.exports=o,cc._RF.pop()},{"../entity/PlayerInfo":"PlayerInfo"}],PopupMan:[function(e,t,i){"use strict";cc._RF.push(t,"f12d03cGPJKNrNFqND4pAjk","PopupMan");var n={popupCommonDlg:function(e,t){cc.loader.loadRes("prefabs/notice_view",function(i,n){var o=cc.instantiate(n).getComponent("NoticeComponent");o.initWithYes(e,t),o.popup()}.bind(this))},popupYesCommonDlg:function(e,t,i,n,o,s){cc.loader.loadRes("prefabs/notice_view",function(c,r){var a=cc.instantiate(r),l=a.getComponent("NoticeComponent");a.initWithYesNo(e,t,i,n,o,s),l.popup()}.bind(this))}};t.exports=n,cc._RF.pop()},{}],ProductInfo:[function(e,t,i){"use strict";cc._RF.push(t,"b3f63X+pghNvLoqjWeAhvKZ","ProductInfo");var n=function(){this.productId=0,this.price=0,this.description=null,this.title=null};n.prototype.unmarshal=function(e){this.productId=e.productId,this.price=e.price,this.description=e.description,this.title=e.title},t.exports=n,cc._RF.pop()},{}],RateManager:[function(e,t,i){"use strict";cc._RF.push(t,"2c30a2ERNpBCa2vwGHGk4Pu","RateManager");var n=cc.Class({ctor:function(){},init:function(){cc.sys.isNative&&jsb_dp.oneSdkBridge.initRateParams(3,1,.5,.5,!0)},rate:function(){cc.sys.isNative&&jsb_dp.oneSdkBridge.launchRate()},likeInFacebook:function(e){cc.sys.openURL(e)},launchAppReview:function(){return!!cc.sys.isNative&&jsb_dp.oneSdkBridge.launchAppReview()}});n.sharedDirector=null,n.firstUseDirector=!0,n.getInstance=function(){return n.firstUseDirector&&(n.firstUseDirector=!1,n.sharedDirector=new n),n.sharedDirector},t.exports=n,cc._RF.pop()},{}],ResMan:[function(e,t,i){"use strict";cc._RF.push(t,"5a370p3adZA/rSr4scrXHm3","ResMan");var n=cc.Class({ctor:function(){},preload:function(e){cc.loader.loadResDir("config",function(t,i){cc.loader.loadResDir("prefabs",function(t,i){cc.loader.loadResDir("audio",function(t,i){e&&e()})})})}});n.sharedDirector=null,n.firstUseDirector=!0,n.getInstance=function(){return n.firstUseDirector&&(n.firstUseDirector=!1,n.sharedDirector=new n),n.sharedDirector},t.exports=n,cc._RF.pop()},{}],ShareConfig:[function(e,t,i){"use strict";cc._RF.push(t,"e812dzg5/tMCYmPvLwxl9IQ","ShareConfig");var n=function(){this.id=0,this.image="",this.desc=""};n.prototype.unmarshal=function(e){this.id=e.id,this.image=e.image,this.desc=e.desc},n.prototype.copy=function(){var e=new n;return e.id=this.id,e.image=this.image,e.desc=this.desc,e},t.exports=n,cc._RF.pop()},{}],ShareManager:[function(e,t,i){"use strict";cc._RF.push(t,"8104fN0tu1Hr73cpD+k8gqG","ShareManager");var n=cc.Class({ctor:function(){},shareWithSystem:function(e){if(cc.sys.isNative){var t="";cc.sys.os===cc.sys.OS_IOS&&(t=game.utils.getScreenShot("capture_screen.jpg")),jsb_dp.oneSdkBridge.systemShare(t,e)}},openAppWithIdentifier:function(e){cc.sys.isNative&&jsb_dp.oneSdkBridge.openAppWithIdentifier(e)},sendEmail:function(e,t,i){cc.sys.isNative&&jsb_dp.oneSdkBridge.sendEmail(e,t,i)},wxShare:function(e,t){window.wx&&wx.updateShareMenu({withShareTicket:!1,complete:function(i){wx.shareAppMessage({title:e.desc,imageUrl:e.image,query:"source=share_"+e.id,success:function(e){t&&t(!0)},fail:function(e){t&&t(!1)}})}})},wxGroupShare:function(e,t,i){window.wx&&wx.updateShareMenu({withShareTicket:!0,success:function(n){wx.shareAppMessage({title:e.desc,imageUrl:e.image,query:"source="+t+"&share=share_"+e.id,success:function(e){console.error(JSON.stringify(e)),e&&e.shareTickets?i&&i(!0):i&&i(!1)},fail:function(e){i&&i(!1)}})}})},registerWxShare:function(e,t){window.wx&&(wx.showShareMenu(),wx.onShareAppMessage(function(){return{title:e,imageUrl:t}}))}});n.sharedDirector=null,n.firstUseDirector=!0,n.getInstance=function(){return n.firstUseDirector&&(n.firstUseDirector=!1,n.sharedDirector=new n),n.sharedDirector},t.exports=n,cc._RF.pop()},{}],SkinCell:[function(e,t,i){"use strict";cc._RF.push(t,"2a4d1Kt86JFxpYEZReOD/KT","SkinCell"),cc.Class({extends:e("viewCell"),properties:{lbCoins:cc.Node,ballSprite:cc.Sprite,index:cc.Label,group:cc.Label},onLoad:function(){},init:function(e,t,i,n){},clicked:function(){}}),cc._RF.pop()},{viewCell:"viewCell"}],SkinScene:[function(e,t,i){"use strict";cc._RF.push(t,"9c242fq3FBK/6tZ/AzSsL0X","SkinScene"),cc.Class({extends:cc.Component,properties:{tableView:cc.Node},onLoad:function(){this.initView()},_getdata:function(e){for(var t=[],i=0;i<e;++i){var n={};n.name="a"+i,t.push(n)}return t},initView:function(){var e=this._getdata(10);this.tableView.getComponent(cc.tableView).initTableView(e.length,{array:e,target:this})},start:function(){},onBackClicked:function(){}}),cc._RF.pop()},{}],StoreConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7d734ZgYJdKdbAV71j0jEaM","StoreConfig");var n=function(){this.id=0,this.type=0,this.name="",this.price=0,this.count=1,this.image="",this.pid="",this.key="",this.hot=!1,this.best=!1};n.prototype.unmarshal=function(e){this.id=e.id,this.type=e.type,this.name=e.name,this.price=e.price,this.count=e.count,this.image=e.image,this.pid=e.pid,this.key=e.key,this.hot=e.hot,this.best=e.best},t.exports=n,cc._RF.pop()},{}],StoreManager:[function(e,t,i){"use strict";cc._RF.push(t,"d74e0gmhL1JEZS1q08cbqEC","StoreManager");var n=e("../entity/PaymentInfo"),o=e("../enum/PaymentCode"),s=e("../entity/ProductInfo"),c=(cc.Class({onPaymentCompleted:function(e,t){},onGetUnverifiedReceiptList:function(e){},onGetProductList:function(e){}}),cc.Class({paymentDelegate:null,productList:null,ctor:function(){cc.sys.isNative&&(jsb_dp.oneSdkBridge.onGetProductList=this.onGetProductList.bind(this),jsb_dp.oneSdkBridge.onPurchase=this.onPurchase.bind(this),jsb_dp.oneSdkBridge.onConsume=this.onConsume.bind(this),jsb_dp.oneSdkBridge.onGetUnverifiedReceiptList=this.onGetUnverifiedReceiptList.bind(this))},setPaymentDelegate:function(e){this.paymentDelegate=e},onGetProductList:function(e){if(cc.log("onGetProductList: "+e),e){var t=JSON.parse(e);if(t&&t.length>0){for(var i=[],n=0;n<t.length;++n){var o=new s;o.unmarshal(t[n]),i.push(o)}this.paymentDelegate.onGetProductList(i),this.productList=i}}},onPurchase:function(e){var t;cc.log("onPurchase: "+e),JSON.parse(e).errorCode===o.PAYMENT_CODE_SUCCESS?(t=JSON.parse(e),this._paymentCompleted(o.PAYMENT_CODE_SUCCESS,t)):(t=JSON.parse(e),this._paymentCompleted(o.PAYMENT_CODE_FAIL,t))},onConsume:function(e){cc.log("onConsume: "+e)},onGetUnverifiedReceiptList:function(e){if(cc.log("onGetUnverifiedReceiptList: "+e),e&&e.length>0){var t=JSON.parse(e);if(t&&t.length>0){for(var i=[],o=0;o<t.length;++o){var s=t[o],c=new n;c.unmarshal(s),i.push(c)}this.paymentDelegate.onGetUnverifiedReceiptList(i)}}},_paymentCompleted:function(e,t){var i=new n;if(i.unmarshal(t),e===o.PAYMENT_CODE_SUCCESS)if(t){this.paymentDelegate.onPaymentCompleted(o.PAYMENT_CODE_SUCCESS,i);var s=this._getProductById(i.productId);if(s){var c=100*this._getNumFromString(s.price);game.analyseManager.trackPurchaseEvent(c,s.title,i.productId,i.receipt)}}else this.paymentDelegate.onPaymentCompleted(o.PAYMENT_CODE_FAIL,i);else this.paymentDelegate.onPaymentCompleted(o.PAYMENT_CODE_FAIL,i);cc.sys.os!==cc.sys.OS_ANDROID&&this.consume(i.purchaseId)},_getNumFromString:function(e){return e.replace(/[^0-9.]/gi,"")},requestProduct:function(e){cc.sys.isNative&&jsb_dp.oneSdkBridge.getProductsInfo(e)},payForProduct:function(e){cc.log("payForProduct:"+e),cc.sys.isNative&&jsb_dp.oneSdkBridge.purchase(e)},consume:function(e){cc.log("consume:"+e),cc.sys.isNative&&e&&e.length>0&&jsb_dp.oneSdkBridge.consume(e)},restoreCompletedTransactions:function(){cc.log("restoreCompletedTransactions"),cc.sys.isNative&&jsb_dp.oneSdkBridge.restoreTransactions()},getUnverifiedReceiptList:function(){cc.log("getUnverifiedReceiptList"),cc.sys.isNative&&jsb_dp.oneSdkBridge.getUnverifiedReceiptList()},_getProductById:function(e){if(this.productList&&this.productList.length>0)for(var t=0;t<this.productList.length;++t){var i=this.productList[t];if(i.productId===e)return i}return null}}));c.sharedDirector=null,c.firstUseDirector=!0,c.getInstance=function(){return c.firstUseDirector&&(c.firstUseDirector=!1,c.sharedDirector=new c),c.sharedDirector},t.exports=c,cc._RF.pop()},{"../entity/PaymentInfo":"PaymentInfo","../entity/ProductInfo":"ProductInfo","../enum/PaymentCode":"PaymentCode"}],TopUI:[function(e,t,i){"use strict";cc._RF.push(t,"25598GdJGBNSaTiDFgfTMhF","TopUI");var n=cc.Class({extends:cc.Component,properties:{lbLevel:cc.Label,ptPencil:cc.ProgressBar,lbCoins:cc.Label,lbPencilPercent:cc.Label},onLoad:function(){game.dispatcher.on("update_line_progress",this.onLineLenUpdate,this),this.lbLevel.string="Level "+game.gameMan.level,this.setLineLenPercent(0)},onDestroy:function(){game.dispatcher.off("update_line_progress",this.onLineLenUpdate,this)},setLineLenPercent:function(e){this.ptPencil.progress=game.gameMan.getCurrentPencilProgress(),this.lbPencilPercent.string=Math.floor(100*game.gameMan.getCurrentPencilProgress())+"%"},onLineLenUpdate:function(e){this.setLineLenPercent(e.lineLen)},onRefreshClicked:function(){game.dispatcher.emit("refresh_level")},onPauseClicked:function(){cc.director.loadScene("MenuScene")},onHintClicked:function(){game.dispatcher.emit("draw_hint_line")}});t.exports=n,cc._RF.pop()},{}],Utils:[function(e,t,i){"use strict";cc._RF.push(t,"347a25c7g9HNIy+eDgmlGAx","Utils");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={randomNextInt:function(e){return Math.floor(Math.random()*e)},randomNextNumber:function(e){return Math.random()*e},rangeNextInt:function(e,t){return e+this.randomNextInt(t-e+1)},rangeNextNumber:function(e,t){return e+this.randomNextNumber(t-e)},randomNextNumberInRange:function(e,t){return Math.random()*(t-e)+e},randomNextIntInRange:function(e,t){return Math.floor(Math.random()*(t-e)+e)},sprintf:function(){for(var e,t,i,o,s,c=0,r=arguments[c++],a=[];r;){if(t=/^[^\x25]+/.exec(r))a.push(t[0]);else if(t=/^\x25{2}/.exec(r))a.push("%");else{if(!(t=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(r)))throw"Huh ?!";if(null==(e=arguments[t[1]||c++])||void 0==e)throw"Too few arguments.";if(/[^s]/.test(t[7])&&"number"!=typeof e)throw"Expecting number but found "+(void 0===e?"undefined":n(e));switch(t[7]){case"b":e=e.toString(2);break;case"c":e=String.fromCharCode(e);break;case"d":e=parseInt(e);break;case"e":e=t[6]?e.toExponential(t[6]):e.toExponential();break;case"f":e=t[6]?parseFloat(e).toFixed(t[6]):parseFloat(e);break;case"o":e=e.toString(8);break;case"s":e=(e=String(e))&&t[6]?e.substring(0,t[6]):e;break;case"u":e=Math.abs(e);break;case"x":e=e.toString(16);break;case"X":e=e.toString(16).toUpperCase()}e=/[def]/.test(t[7])&&t[2]&&e>=0?"+"+e:e,o=t[3]?"0"==t[3]?"0":t[3].charAt(1):" ",s=t[5]-String(e).length-"".length,i=t[5]?str_repeat(o,s):"",a.push(""+(t[4]?e+i:i+e))}r=r.substring(t[0].length)}return a.join("")},loadJson:function(e){var t=cc.loader.getRes(e);return t?t.json:null},scaleCCLabelBMFont:function(e,t){if(e.width>t){var i=t/e.width;e.scaleX=e.scaleY=i}else e.scaleX=e.scaleY=1},scaleCCLabelBMFontWithMaxScale:function(e,t,i){e.width*e.scaleX>t&&(e.scaleX=e.scaleY=t/e.width),e.scaleX>i&&(e.scaleX=e.scaleY=i)},walkNode:function(e,t){if(e){var i=t(e);if(i)for(var n in e.children)if(!(i=this.walkNode(e.children[n],t)))break;return i}return!0},getFormatTime:function(e){var t=e-Math.floor(e);return(e=Math.floor(e))<=60?""+(e+t).toFixed(2):e<=3600?Math.floor(e/60)+":"+(e%60+t).toFixed(2):Math.floor(e/3600)+":"+Math.floor(e%3600/60)+":"+(e%216e3+t).toFixed(2)},seekNodeByTag:function(e,t){if(null===e)return null;if(e.getTag()===t)return e;var i=e.getChildren();if(i&&i.length>0)for(var n=i.length,o=0;o<n;o++){var s=i[o];if(null!==s){var c=this.seekNodeByTag(s,t);if(null!==c)return c}}return null},drawDashPoints:function(e,t,i,n,o){for(var s,c,r,a,l,h,d=e[0].x,u=e[0].y,p=0,f=0,g=i.length,_=0,v=n,m=n+i[_],C=0,y=e.length;C<y;C++){if(l=e[C].x,h=e[C].y,0!==C)for(s=l-d,c=h-u,f=Math.sqrt(s*s+c*c),r||(r=d),a||(a=u);f>0;)if(p+f<v)p+=f,f=0,r=l,a=h;else{if(p<=v){if(r+=(S=(w=v-p)/f)*(l-r),a+=S*(h-a),o){var S=cc.AffineTransform.transformVec2(r,a,o);t.moveTo(S.x,S.y)}else t.moveTo(r,a);f-=w,p+=w}if(p+f<m){if(r=l,a=h,o){S=cc.AffineTransform.transformVec2(r,a,o);t.lineTo(S.x,S.y)}else t.lineTo(r,a);p+=f,f=0}else if(p+f>=m){var w;if(r+=(S=(w=m-p)/f)*(l-r),a+=S*(h-a),o){S=cc.AffineTransform.transformVec2(r,a,o);t.lineTo(S.x,S.y)}else t.lineTo(r,a);f-=w,p+=w,m=(v=m+i[++_%g])+i[++_%g]}}d=l,u=h}},playDialogAnim:function(e){}};t.exports=o,cc._RF.pop()},{}],WheelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2e341DwH5dBSJprsPTNw5tC","WheelConfig");var n=function(){this.id=0,this.type=0,this.count=0,this.probability=0,this.image=""};n.prototype.unmarshal=function(e){this.id=e.id,this.type=e.type,this.count=e.count,this.probability=e.probability,this.image=e.image},t.exports=n,cc._RF.pop()},{}],Wheel:[function(e,t,i){"use strict";cc._RF.push(t,"986c821ykxE9LY/tLgwXKCg","Wheel");var n=function(e,t,i,n,o){return{x:t.x*(1-e)*(1-e)*(1-e)+3*i.x*e*(1-e)*(1-e)+3*n.x*e*e*(1-e)+o.x*e*e*e,y:t.y*(1-e)*(1-e)*(1-e)+3*i.y*e*(1-e)*(1-e)+3*n.y*e*e*(1-e)+o.y*e*e*e}},o=cc.Class({target:null,bCurve:[.42,-.08,.58,1.1],fps:0,nRound:1,frameCount:0,elapsedTime:0,totalRotationTime:0,startRotation:0,movement:0,easyFunction:null,endCallback:null,targetRotation:0,wheelItemAngle:0,lastTime:0,lastRotation:0,speed:0,_lotteryReseting:!1,_isHighRotating:!1,_startUpdate:!1,ctor:function(e,t){this.target=e,this.fps=t||60},rotate:function(e,t,i,n){this._startUpdate||(this.targetRotation=t,this.frameCount=0,this.totalRotationTime=e,this.startRotation=this.target.rotation%360,this.movement=t-this.startRotation,this.wheelItemAngle=i,this.lastTime=Date.now(),this.lastRotation=0,this._isHighRotating=!1,this._lotteryReseting=!1,this.easyFunction=this.defaultEasyFunction,this.endCallback=n,this.scheduleUpdate(),this._startUpdate=!0)},scheduleUpdate:function(){this.elapsedTime=0,cc.director.getScheduler().scheduleUpdateForTarget(this,0,!1)},unscheduleUpdate:function(){cc.director.getScheduler().unscheduleUpdateForTarget(this),this.elapsedTime=0},update:function(e){this._startUpdate&&this.moveByFrame(e)},moveByFrame:function(e){this.elapsedTime+=e;var t=this.easyFunction(this.elapsedTime/this.totalRotationTime);this.target.rotation=t*this.movement+this.startRotation,this.targetRotation<=this.target.rotation&&(this.target.rotation=this.targetRotation,this.unscheduleUpdate(),this._startUpdate=!1,this.endCallback&&this.endCallback()),this.speed=(this.target.rotation-this.lastRotation)/(Date.now()-this.lastTime)*1e3,this.lastTime=Date.now(),this.lastRotation=this.target.rotation},defaultEasyFunction:function(e){var t=this.bCurve;return n(e,{x:0,y:0},{x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:1,y:1}).y},getTargetRotation:function(){return this.targetRotation},getSpeed:function(){return this.speed}});t.exports=o,cc._RF.pop()},{}],storage:[function(e,t,i){"use strict";cc._RF.push(t,"93a7cXqL7JBq5suN480jivQ","storage");var n=cc.Class({extends:cc.Component,properties:{},setItem:function(e,t){cc.sys.localStorage.setItem(e,t)},getItem:function(e,t){var i=cc.sys.localStorage.getItem(e);return i||t},removeItem:function(e){cc.sys.localStorage.removeItem(e)}});n.sharedDirector=null,n.firstUseDirector=!0,n.getInstance=function(){return n.firstUseDirector&&(n.firstUseDirector=!1,n.sharedDirector=new n),n.sharedDirector},t.exports=n,cc._RF.pop()},{}],tableView:[function(e,t,i){"use strict";cc._RF.push(t,"afd05VTp31MwbLm7515Hea3","tableView");var n=cc.Enum({Horizontal:0,Vertical:1}),o=cc.Enum({None:0,Up:1,Down:2,Left:3,Rigth:4}),s=cc.Enum({LEFT_TO_RIGHT__TOP_TO_BOTTOM:0,TOP_TO_BOTTOM__LEFT_TO_RIGHT:1}),c=cc.Enum({Scroll:0,Flip:1});function r(e,t){return cc.v2(e.x-t.x,e.y-t.y)}function a(e,t){for(var i=0,n=e.children,o=n.length;i<o;i++)if(n[i]._cellIndex===t)return n[i];return null}var l=cc.Class({extends:cc.ScrollView,editor:!1,properties:{_data:null,_minCellIndex:0,_maxCellIndex:0,_paramCount:0,_count:0,_cellCount:0,_showCellCount:0,_groupCellCount:null,_scrollDirection:o.None,_cellPool:null,_view:null,_page:0,_pageTotal:0,cell:{default:null,type:cc.Prefab,notify:function(e){}},ScrollModel:{default:0,type:n,notify:function(e){this.ScrollModel===n.Horizontal?(this.horizontal=!0,this.vertical=!1,this.verticalScrollBar=null):(this.vertical=!0,this.horizontal=!1,this.horizontalScrollBar=null)},tooltip:"\u6a2a\u5411\u7eb5\u5411\u6ed1\u52a8"},ViewType:{default:0,type:c,notify:function(e){this.ViewType===c.Flip?this.inertia=!1:this.inertia=!0},tooltip:"\u4e3aScroll\u65f6,\u4e0d\u505a\u89e3\u91ca\n\u4e3aFlipw\u65f6\uff0c\u5728Scroll\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u7ffb\u9875\u7684\u884c\u4e3a"},isFill:{default:!1,tooltip:"\u5f53\u8282\u70b9\u4e0d\u80fd\u94fa\u6ee1\u4e00\u9875\u65f6\uff0c\u9009\u62e9isFill\u4e3atrue\u4f1a\u586b\u5145\u8282\u70b9\u94fa\u6ee1\u6574\u4e2aview"},Direction:{default:0,type:s,tooltip:"\u89c4\u5b9acell\u7684\u6392\u5217\u65b9\u5411"},pageChangeEvents:{default:[],type:cc.Component.EventHandler,tooltip:"\u4ec5\u5f53ViewType\u4e3apageView\u65f6\u6709\u6548\uff0c\u521d\u59cb\u5316\u6216\u7ffb\u9875\u65f6\u89e6\u53d1\u56de\u8c03\uff0c\u5411\u56de\u8c03\u4f20\u5165\u4e24\u4e2a\u53c2\u6570\uff0c\u53c2\u6570\u4e00\u4e3a\u5f53\u524d\u5904\u4e8e\u54ea\u4e00\u9875\uff0c\u53c2\u6570\u4e8c\u4e3a\u4e00\u5171\u591a\u5c11\u9875"}},statics:{_cellPoolCache:{}},onLoad:function(){var e=this;l._tableView.push(this);var t=this.node.destroy;this.node.destroy=function(){e.clear(),t.call(e.node)};var i=this.node._onPreDestroy;this.node._onPreDestroy=function(){e.clear(),i.call(e.node)}},onDestroy:function(){for(var e in l._tableView)if(l._tableView[e]===this)return void l._tableView.splice(e)},_initCell:function(e,t){if(this.ScrollModel===n.Horizontal&&this.Direction===s.TOP_TO_BOTTOM__LEFT_TO_RIGHT||this.ScrollModel===n.Vertical&&this.Direction===s.LEFT_TO_RIGHT__TOP_TO_BOTTOM)for(var i=e._cellIndex*e.childrenCount,o=0;o<e.childrenCount;++o){(a=e.children[o].getComponent("viewCell"))&&(a._cellInit_(this),a.init(i+o,this._data,t,[e._cellIndex,o]))}else if(this.ViewType===c.Flip){var r=(i=Math.floor(e._cellIndex/this._showCellCount))*this._showCellCount*e.childrenCount;for(o=0;o<e.childrenCount;++o){(a=e.children[o].getComponent("viewCell"))&&(a._cellInit_(this),a.init(this._showCellCount*o+e._cellIndex%this._showCellCount+r,this._data,t,[o+i*e.childrenCount,o]))}}else for(o=0;o<e.childrenCount;++o){var a;(a=e.children[o].getComponent("viewCell"))&&(a._cellInit_(this),a.init(o*this._count+e._cellIndex,this._data,t,[o,o]))}},_setCellPosition:function(e,t){this.ScrollModel===n.Horizontal?(e.x=0===t?-this.content.width*this.content.anchorX+e.width*e.anchorX:a(this.content,t-1).x+e.width,e.y=(e.anchorY-this.content.anchorY)*e.height):(e.y=0===t?this.content.height*(1-this.content.anchorY)-e.height*(1-e.anchorY):a(this.content,t-1).y-e.height,e.x=(e.anchorX-this.content.anchorX)*e.width)},_addCell:function(e){var t=this._getCell();this._setCellAttr(t,e),this._setCellPosition(t,e),t.parent=this.content,this._initCell(t)},_setCellAttr:function(e,t){e.setSiblingIndex(t>=e._cellIndex?this._cellCount:0),e._cellIndex=t},_addCellsToView:function(){for(var e=0;e<=this._maxCellIndex;++e)this._addCell(e)},_getCell:function(){if(0===this._cellPool.size()){var e=cc.instantiate(this.cell),t=new cc.Node;t.anchorX=.5,t.anchorY=.5;var i=0;if(this.ScrollModel===n.Horizontal){t.width=e.width;var o=Math.floor(this.content.height/e.height);t.height=this.content.height;for(var s=0;s<o;++s)e||(e=cc.instantiate(this.cell)),e.x=(e.anchorX-.5)*e.width,e.y=t.height/2-e.height*(1-e.anchorY)-i,i+=e.height,e.parent=t,e=null}else{t.height=e.height;o=Math.floor(this.content.width/e.width);t.width=this.content.width;for(s=0;s<o;++s)e||(e=cc.instantiate(this.cell)),e.y=(e.anchorY-.5)*e.height,e.x=-t.width/2+e.width*e.anchorX+i,i+=e.width,e.parent=t,e=null}this._cellPool.put(t)}return e=this._cellPool.get()},_getCellSize:function(){var e=this._getCell(),t=e.getContentSize();return this._cellPool.put(e),t},_getGroupCellCount:function(){var e=this._getCell(),t=e.childrenCount;return this._cellPool.put(e),t},clear:function(){for(var e=this.content.childrenCount-1;e>=0;--e)this._cellPool.put(this.content.children[e]);this._cellCount=0,this._showCellCount=0},reload:function(e){void 0!==e&&(this._data=e);for(var t=this.content.childrenCount-1;t>=0;--t)this._initCell(this.content.children[t],!0)},_getCellPoolCacheName:function(){return this.ScrollModel===n.Horizontal?this.cell.name+"h"+this.content.height:this.cell.name+"w"+this.content.width},_initTableView:function(){this._cellPool&&this.clear();var e=this._getCellPoolCacheName();l._cellPoolCache[e]||(l._cellPoolCache[e]=new cc.NodePool("viewCell")),this._cellPool=l._cellPoolCache[e],this._cellSize=this._getCellSize(),this._groupCellCount=this._getGroupCellCount(),this._count=Math.ceil(this._paramCount/this._groupCellCount),this.ScrollModel===n.Horizontal?(this._view.width=this.node.width,this._view.x=(this._view.anchorX-this.node.anchorX)*this._view.width,this._cellCount=Math.ceil(this._view.width/this._cellSize.width)+1,this.ViewType===c.Flip?this._cellCount>this._count?(this.isFill?this._cellCount=Math.floor(this._view.width/this._cellSize.width):this._cellCount=this._count,this._showCellCount=this._cellCount,this._pageTotal=1):(this._pageTotal=Math.ceil(this._count/(this._cellCount-1)),this._count=this._pageTotal*(this._cellCount-1),this._showCellCount=this._cellCount-1):this._cellCount>this._count?(this.isFill?this._cellCount=Math.floor(this._view.width/this._cellSize.width):this._cellCount=this._count,this._showCellCount=this._cellCount):this._showCellCount=this._cellCount-1,this.content.width=this._count*this._cellSize.width,this.stopAutoScroll(),this.scrollToLeft()):(this._view.height=this.node.height,this._view.y=(this._view.anchorY-this.node.anchorY)*this._view.height,this._cellCount=Math.ceil(this._view.height/this._cellSize.height)+1,this.ViewType===c.Flip?this._cellCount>this._count?(this.isFill?this._cellCount=Math.floor(this._view.height/this._cellSize.height):this._cellCount=this._count,this._showCellCount=this._cellCount,this._pageTotal=1):(this._pageTotal=Math.ceil(this._count/(this._cellCount-1)),this._count=this._pageTotal*(this._cellCount-1),this._showCellCount=this._cellCount-1):this._cellCount>this._count?(this.isFill?this._cellCount=Math.floor(this._view.height/this._cellSize.height):this._cellCount=this._count,this._showCellCount=this._cellCount):this._showCellCount=this._cellCount-1,this.content.height=this._count*this._cellSize.height,this.stopAutoScroll(),this.scrollToTop()),this._changePageNum(1-this._page),this._lastOffset=this.getScrollOffset(),this._minCellIndex=0,this._maxCellIndex=this._cellCount-1,this._addCellsToView()},initTableView:function(e,t){this._paramCount=e,this._data=t,this.ScrollModel===n.Horizontal?(this.horizontal=!0,this.vertical=!1):(this.vertical=!0,this.horizontal=!1),this._view=this.content.parent,this.verticalScrollBar&&this.verticalScrollBar.node.on("size-changed",function(){this._updateScrollBar(this._getHowMuchOutOfBoundary())},this),this.horizontalScrollBar&&this.horizontalScrollBar.node.on("size-changed",function(){this._updateScrollBar(this._getHowMuchOutOfBoundary())},this),this.node.getComponent(cc.Widget)&&this.node.getComponent(cc.Widget).updateAlignment(),this._initTableView()},_onTouchBegan:function(e,t){this._super(e,t),this._touchstart(e)},_onTouchMoved:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){var i=e.touch;if(this.content&&this._handleMoveLogic(i),this.cancelInnerEvents){if(r(i.getLocation(),i.getStartLocation()).mag()>7&&!this._touchMoved&&e.target!==this.node){var n=new cc.Event.EventTouch(e.getTouches(),e.bubbles);n.type=cc.Node.EventType.TOUCH_CANCEL,n.touch=e.touch,n.simulate=!0,e.target.emit(cc.Node.EventType.TOUCH_CANCEL,n),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(e),this._touchmove(e)}}},_onTouchEnded:function(e,t){this._super(e,t),this._touchend(e)},_onTouchCancelled:function(e,t){this._super(e,t),this._touchend(e)},stopAutoScroll:function(){this._scrollDirection=o.None,this._super()},scrollToBottom:function(e,t){this._scrollDirection=o.Up,this._super(e,t)},scrollToTop:function(e,t){this._scrollDirection=o.Down,this._super(e,t)},scrollToLeft:function(e,t){this._scrollDirection=o.Rigth,this._super(e,t)},scrollToRight:function(e,t){this._scrollDirection=o.Left,this._super(e,t)},scrollToOffset:function(e,t,i){var s=r(e,this.getScrollOffset());this.ScrollModel===n.Horizontal?s.x>0?this._scrollDirection=o.Left:s.x<0&&(this._scrollDirection=o.Rigth):s.y>0?this._scrollDirection=o.Up:s.y<0&&(this._scrollDirection=o.Down),this._super(e,t,i)},addScrollEvent:function(e,t,i){var n=new cc.Component.EventHandler;n.target=e,n.component=t,n.handler=i,this.scrollEvents.push(n)},removeScrollEvent:function(e){for(var t in this.scrollEvents){if(this.scrollEvents[t].target===e)return void this.scrollEvents.splice(t,1)}},clearScrollEvent:function(){this.scrollEvents=[]},addPageEvent:function(e,t,i){var n=new cc.Component.EventHandler;n.target=e,n.component=t,n.handler=i,this.pageChangeEvents.push(n)},removePageEvent:function(e){for(var t=0;t<this.pageChangeEvents.length;t++){if(this.pageChangeEvents[t].target===e)return void this.pageChangeEvents.splice(t,1)}},clearPageEvent:function(){this.pageChangeEvents=[]},scrollToNextPage:function(){this.scrollToPage(this._page+1)},scrollToLastPage:function(){this.scrollToPage(this._page-1)},scrollToPage:function(e){if(this.ViewType===c.Flip&&e!==this._page&&!(e<1||e>this._pageTotal)){var t=.3*Math.abs(e-this._page);this._changePageNum(e-this._page);var i=this._view.width,n=this._view.height;i=(this._page-1)*i,n=(this._page-1)*n,this.scrollToOffset({x:i,y:n},t)}},getCells:function(e){var t=[],i=function e(t,i){if(t.length<=1)return t;for(var n=Math.floor(t.length/2),o=t[n],s=[],c=[],r=0;r<t.length;r++)r!==n&&(i?i(t[r],o)?s.push(t[r]):c.push(t[r]):t[r]<=o?s.push(t[r]):c.push(t[r]));return e(s,i).concat([o],e(c,i))}(this.content.children,function(e,t){return e._cellIndex<t._cellIndex});for(var n in i){var o=i[n];for(var s in o.children)t.push(o.children[s])}e(t)},getData:function(){return this._data},getGroupsRange:function(e){for(var t=[],i=this._minCellIndex;i<=this._maxCellIndex;i++)t.push(i);e(t)},_changePageNum:function(e){this._page+=e,this._page<=0?this._page=1:this._page>this._pageTotal&&(this._page=this._pageTotal);for(var t=0;t<this.pageChangeEvents.length;t++){this.pageChangeEvents[t].emit([this._page,this._pageTotal])}},_touchstart:function(e){this.ScrollModel===n.Horizontal?this.horizontal=!1:this.vertical=!1},_touchmove:function(e){if(this.horizontal===this.vertical){var t=e.getStartLocation(),i=e.getLocation();if(this.ScrollModel===n.Horizontal){if(Math.abs(i.x-t.x)<=7)return}else if(Math.abs(i.y-t.y)<=7)return;this.ScrollModel===n.Horizontal?this.horizontal=!0:this.vertical=!0}},_touchend:function(e){this.ScrollModel===n.Horizontal?this.horizontal=!0:this.vertical=!0,this.ViewType===c.Flip&&this._pageTotal>1&&this._pageMove(e)},_pageMove:function(e){var t=this._view.width,i=this._view.height;if(this.ViewType===c.Flip){var s=this.getScrollOffset(),r=this.getMaxScrollOffset();if(this.ScrollModel===n.Horizontal){if(s.x>=0||s.x<=-r.x)return;if(i=0,Math.abs(e.getLocation().x-e.getStartLocation().x)>this._view.width/4)if(this._scrollDirection===o.Left){if(!(this._page<this._pageTotal))return;this._changePageNum(1)}else if(this._scrollDirection===o.Rigth){if(!(this._page>1))return;this._changePageNum(-1)}}else{if(s.y>=r.y||s.y<=0)return;if(t=0,Math.abs(e.getLocation().y-e.getStartLocation().y)>this._view.height/4)if(this._scrollDirection===o.Up){if(!(this._page<this._pageTotal))return;this._changePageNum(1)}else if(this._scrollDirection===o.Down){if(!(this._page>1))return;this._changePageNum(-1)}}t=(this._page-1)*t,i=(this._page-1)*i,this.scrollToOffset({x:t,y:i},.3)}},_getBoundingBoxToWorld:function(e){var t=e.convertToWorldSpace(cc.v2(0,0));return cc.rect(t.x,t.y,e.width,e.height)},_updateCells:function(){if(this.ScrollModel===n.Horizontal){if(this._scrollDirection===o.Left){if(this._maxCellIndex<this._count-1){var e=this._getBoundingBoxToWorld(this._view);do{var t=a(this.content,this._minCellIndex);if(!((i=this._getBoundingBoxToWorld(t)).xMax<=e.xMin))break;t.x=a(this.content,this._maxCellIndex).x+t.width,this._minCellIndex++,this._maxCellIndex++,i.xMax+(this._maxCellIndex-this._minCellIndex+1)*t.width>e.xMin&&(this._setCellAttr(t,this._maxCellIndex),this._initCell(t))}while(this._maxCellIndex!==this._count-1)}}else if(this._scrollDirection===o.Rigth&&this._minCellIndex>0){e=this._getBoundingBoxToWorld(this._view);do{t=a(this.content,this._maxCellIndex);if(!((i=this._getBoundingBoxToWorld(t)).xMin>=e.xMax))break;t.x=a(this.content,this._minCellIndex).x-t.width,this._minCellIndex--,this._maxCellIndex--,i.xMin-(this._maxCellIndex-this._minCellIndex+1)*t.width<e.xMax&&(this._setCellAttr(t,this._minCellIndex),this._initCell(t))}while(0!==this._minCellIndex)}}else if(this._scrollDirection===o.Up){if(this._maxCellIndex<this._count-1){e=this._getBoundingBoxToWorld(this._view);do{t=a(this.content,this._minCellIndex);if(!((i=this._getBoundingBoxToWorld(t)).yMin>=e.yMax))break;t.y=a(this.content,this._maxCellIndex).y-t.height,this._minCellIndex++,this._maxCellIndex++,i.yMin-(this._maxCellIndex-this._minCellIndex+1)*t.height<e.yMax&&(this._setCellAttr(t,this._maxCellIndex),this._initCell(t))}while(this._maxCellIndex!==this._count-1)}}else if(this._scrollDirection===o.Down&&this._minCellIndex>0){e=this._getBoundingBoxToWorld(this._view);do{var i;t=a(this.content,this._maxCellIndex);if(!((i=this._getBoundingBoxToWorld(t)).yMax<=e.yMin))break;t.y=a(this.content,this._minCellIndex).y+t.height,this._minCellIndex--,this._maxCellIndex--,i.yMax+(this._maxCellIndex-this._minCellIndex+1)*t.width>e.yMin&&(this._setCellAttr(t,this._minCellIndex),this._initCell(t))}while(0!==this._minCellIndex)}},_getScrollDirection:function(){var e=this.getScrollOffset(),t=this._lastOffset;this._lastOffset=e,e=r(e,t),this.ScrollModel===n.Horizontal?e.x>0?this._scrollDirection=o.Rigth:e.x<0?this._scrollDirection=o.Left:this._scrollDirection=o.None:e.y<0?this._scrollDirection=o.Down:e.y>0?this._scrollDirection=o.Up:this._scrollDirection=o.None},update:function(e){this._super(e),this._cellCount!==this._showCellCount&&1!==this._pageTotal&&(this._getScrollDirection(),this._updateCells())}});l._tableView=[],l.reload=function(){for(var e in l._tableView)l._tableView[e].reload()},l.clear=function(){for(var e in l._tableView)l._tableView[e].clear()},cc.tableView=t.export=l,cc._RF.pop()},{}],viewCell:[function(e,t,i){"use strict";cc._RF.push(t,"99bb9PxAjREK4zcHrUsxER+","viewCell"),cc.Class({extends:cc.Component,properties:{tableView:{default:null,visible:!1},_isCellInit_:!1,_longClicked_:!1},_cellAddMethodToNode_:function(){this.node.clicked=this.clicked.bind(this)},_cellAddTouch_:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){!0===this.node.active&&0!==this.node.opacity&&(this._longClicked_||(this._longClicked_=!0,this.scheduleOnce(this._longClicked,1.5)))},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(){this._longClicked_&&(this._longClicked_=!1,this.unschedule(this._longClicked))},this),this.node.on(cc.Node.EventType.TOUCH_END,function(){this.clicked(),this._longClicked_&&(this._longClicked_=!1,this.unschedule(this._longClicked))},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){this._longClicked_&&(this._longClicked_=!1,this.unschedule(this._longClicked))},this)},_cellInit_:function(e){this.tableView=e,this._isCellInit_||(this._cellAddMethodToNode_(),this._cellAddTouch_(),this._isCellInit_=!0)},_longClicked:function(){this._longClicked_=!1,this.node.emit(cc.Node.EventType.TOUCH_CANCEL),this.longClicked()},longClicked:function(){},clicked:function(){},init:function(e,t,i,n){}}),cc._RF.pop()},{}]},{},["GamePrepare","AudioPlayer","EventDispatcher","IAPData","PaymentInfo","PlayerInfo","ProductInfo","AdsStatus","PaymentCode","LinePhysicsCollider","tableView","viewCell","AdsManager","AnalyseManager","CrossPromManager","GCManager","LocalizationManager","NotificationManager","RateManager","ShareManager","StoreManager","PlayerMan","DialogManager","ModalComponent","storage","AudioHelper","Utils","Wheel","NoticeComponent","Config","ConfigMan","LevelConfig","ShareConfig","StoreConfig","WheelConfig","EditorHelper","Ball","GameStep","AudioMan","Game","GameMan","PopupMan","ResMan","EditorScene","GameScene","LevelScene","LoadingScene","MenuScene","PassScene","SkinScene","DebugUI","LevelCell","SkinCell","TopUI"]);